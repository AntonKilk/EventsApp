@model AddParticipantViewModel

@{
    ViewData["Title"] = "Add Participant";
}

<h2>Add Participant to Event</h2>

<form asp-action="AddParticipantToEvent" asp-controller="Participants">
    <input type="hidden" name="eventId" value="@Model.EventId" />

    <div class="form-group">
        <label>Participant Type</label>
        <select id="participantType" name="participantType" class="form-control">
            <option value="">-- Select Participant Type --</option>
            <option value="Person">Person</option>
            <option value="Company">Company</option>
        </select>
    </div>

    <div id="personFields" style="display:none;">
        <div class="form-group">
            <label>First Name</label>
            <input type="text" name="FirstName" class="form-control" />
        </div>
        <div class="form-group">
            <label>Surname</label>
            <input type="text" name="LastName" class="form-control" />
        </div>
        <div class="form-group">
            <label>Personal Code</label>
            <input type="text" name="PersonalCode" class="form-control" />
        </div>
        <div class="form-group">
            <label>Method of Paying the Participation Fee</label>
            <select name="PaymentMethod" class="form-control">
                <option value="BankTransfer">Bank Transfer</option>
                <option value="Cash">Cash</option>
            </select>
        </div>
        <div class="form-group">
            <label>Additional Information</label>
            <textarea name="AdditionalInformation" class="form-control" maxlength="1500"></textarea>
        </div>
    </div>

    <div id="companyFields" style="display:none;">
        <div class="form-group">
            <label>Legal Name of the Company</label>
            <input type="text" name="Name" class="form-control" />
        </div>
        <div class="form-group">
            <label>Company Registration Code</label>
            <input type="text" name="CompanyRegistrationCode" class="form-control" />
        </div>
        <div class="form-group">
            <label>Number of Participants from the Company</label>
            <input type="number" name="NumberOfParticipants" class="form-control" />
        </div>
        <div class="form-group">
            <label>Method of Paying the Participation Fee</label>
            <select name="PaymentMethod" class="form-control">
                <option value="BankTransfer">Bank Transfer</option>
                <option value="Cash">Cash</option>
            </select>
        </div>
        <div class="form-group">
            <label>Additional Information</label>
            <textarea name="AdditionalInformation" class="form-control" maxlength="5000"></textarea>
        </div>
    </div>

    <button id="addParticipantBtn" type="submit" class="btn btn-primary">Add Participant</button>
</form>

<script>
    document.getElementById('participantType').addEventListener('change', function () {
        var showPerson = this.value === 'Person';
        document.getElementById('personFields').style.display = showPerson ? '' : 'none';
        document.getElementById('companyFields').style.display = showPerson ? 'none' : '';
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var participantTypeSelect = document.getElementById('participantType');
        var addParticipantBtn = document.getElementById('addParticipantBtn');

        addParticipantBtn.disabled = true;

        participantTypeSelect.addEventListener('change', function () {
            // Check if the selected value is either "Person" or "Company"
            if (this.value === 'Person' || this.value === 'Company') {
                // If yes, enable the button
                addParticipantBtn.disabled = false;
            } else {
                // If no valid option is selected, disable the button
                addParticipantBtn.disabled = true;
            }
        });
    });
</script>